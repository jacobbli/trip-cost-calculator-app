(function(){var e={5913:function(e){function t(e,t){e.setSeconds(0),t.setSeconds(0),e.setMilliseconds(0),t.setMilliseconds(0);const a=e.getTimezoneOffset()-t.getTimezoneOffset(),l=t-e+6e4*a,s=Math.floor(l/864e5),o=Math.floor(l/36e5)-24*s,n=Math.floor(l/6e4)-24*s*60-60*o;return{days:parseInt(s),hours:parseInt(o),minutes:parseInt(n)}}function a(e){const t=1440*e.days+60*e.hours+e.minutes;return t>480?Math.ceil(t/1440):0}e.exports={calculateTripDuration:t,calculatePvrtDays:a}},2768:function(e,t,a){"use strict";var l=a(9242),s=a(3396),o=a(4870),n=(a(7658),a(7139)),r={__name:"DatetimeInput",props:{datetime:{type:Date},onChange:{type:Function}},setup(e){const t=e,a=(0,o.iH)("");function n(e){const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0"),s=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0");return`${t}-${a}-${l} ${s}:${o}`}function r(){const e=new Date(a.value);t.onChange(e)}return(0,s.bv)((()=>{a.value=n(t.datetime)})),(e,t)=>(0,s.wy)(((0,s.wg)(),(0,s.iD)("input",{type:"datetime-local","onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),onChange:r},null,544)),[[l.nr,a.value]])}};const u=r;var c=u;const i={class:"tripInputItem__container"};var d={__name:"TripInputItem",props:{label:{type:String}},setup(e){return(t,a)=>((0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",null,(0,n.zw)(e.label),1),(0,s.WI)(t.$slots,"default")]))}},v=a(89);const p=(0,v.Z)(d,[["__scopeId","data-v-62e87e16"]]);var m=p;const _={name:"CAR_SHARE",minuteRate:.49,hourRate:17.99,dayRate:104.99,accessFee:1.85,isPvrtCharged:!0,isGstCharged:!0,isPstCharged:!0},b={name:"EBIKE_SHARE",minuteRate:.35,subscriptionMinuteRate:.1,hourRate:12.99,dayRate:149.99,accessFee:1.85,isPvrtCharged:!1,isGstCharged:!0,isPstCharged:!1},h=Object.freeze({CAR_SHARE:_,EBIKE_SHARE:b}),f={class:"tripInputs__container"},g=["checked"],S=["checked"],y=["checked"];var C={__name:"TripInputs",props:{startDatetime:{type:Date},endDatetime:{type:Date},onChange:{type:Function},isBcaaMember:{type:Boolean,default:!1},includeAccessFee:{type:Boolean,default:!0},hasSubscription:{type:Boolean,default:!0},toggleBcaaMember:{type:Function},toggleAccessFee:{type:Function},toggleSubscription:{type:Function},selectedService:h},setup(e){const t=e;function a(e,a=1){a?t.onChange(e,t.endDatetime):t.onChange(t.startDatetime,e)}return(t,l)=>((0,s.wg)(),(0,s.iD)("div",f,[(0,s.Wm)(m,{label:"Start time"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{datetime:e.startDatetime,"on-change":e=>a(e,1)},null,8,["datetime","on-change"])])),_:1}),(0,s.Wm)(m,{label:"End time"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{datetime:e.endDatetime,"on-change":e=>a(e,0)},null,8,["datetime","on-change"])])),_:1}),(0,s.Wm)(m,{label:"BCAA member discount"},{default:(0,s.w5)((()=>[(0,s._)("input",{class:"tripInputs__checkbox",id:"is-bcaa-member",type:"checkbox",checked:e.isBcaaMember,onChange:l[0]||(l[0]=(...t)=>e.toggleBcaaMember&&e.toggleBcaaMember(...t))},null,40,g)])),_:1}),(0,s.Wm)(m,{label:"Include access fee"},{default:(0,s.w5)((()=>[(0,s._)("input",{class:"tripInputs__checkbox",id:"include-access-fee",type:"checkbox",checked:e.includeAccessFee,onChange:l[1]||(l[1]=(...t)=>e.toggleAccessFee&&e.toggleAccessFee(...t))},null,40,S)])),_:1}),"EBIKE_SHARE"==e.selectedService.name?((0,s.wg)(),(0,s.j4)(m,{key:0,label:"Has BCAA Mobility Plan Subscription"},{default:(0,s.w5)((()=>[(0,s._)("input",{class:"tripInputs__checkbox",id:"has subscription",type:"checkbox",checked:e.hasSubscription,onChange:l[2]||(l[2]=(...t)=>e.toggleSubscription&&e.toggleSubscription(...t))},null,40,y)])),_:1})):(0,s.kq)("",!0)]))}};const F=(0,v.Z)(C,[["__scopeId","data-v-2aff61be"]]);var w=F;const $={class:"costDetails__container"};var D={__name:"CostDetails",props:{items:{type:Array}},setup(e){return(t,a)=>((0,s.wg)(),(0,s.iD)("div",$,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.items,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.label,class:"costDetails__item"},[(0,s._)("div",null,(0,n.zw)(e.label),1),(0,s._)("div",null,(0,n.zw)(e.value),1)])))),128))]))}};const R=(0,v.Z)(D,[["__scopeId","data-v-5071c897"]]);var k=R;const I={class:"costSummaryItem__value"};var T={__name:"CostSummaryItem",props:{label:{type:String},value:{type:String},tooltip:{type:Object},isTotal:{type:Boolean,default:!1}},setup(e){const t=e,a=(0,s.Fl)((()=>t.isTotal?"costSummaryItem__total":""));return(t,l)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,n.C_)(["costSummaryItem__container",(0,o.SU)(a)])},[(0,s._)("div",null,(0,n.zw)(e.label),1),(0,s._)("div",I,(0,n.zw)(e.value),1),e.tooltip?((0,s.wg)(),(0,s.j4)(k,{key:0,class:"costSummaryItem__tooltip",items:e.tooltip},null,8,["items"])):(0,s.kq)("",!0)],2))}};const A=(0,v.Z)(T,[["__scopeId","data-v-1724fc05"]]);var x=A;const j={class:"costSummary__container"};var H={__name:"CostSummary",props:{costItems:{type:Array}},setup(e){return(t,a)=>((0,s.wg)(),(0,s.iD)("div",j,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.costItems,(e=>((0,s.wg)(),(0,s.j4)(x,{key:e.label,label:e.label,value:e.value,"is-total":e.isTotal,tooltip:e.tooltip},null,8,["label","value","is-total","tooltip"])))),128))]))}};const P=(0,v.Z)(H,[["__scopeId","data-v-2c58318a"]]);var M=P,O=a(5913);const E={GST:.05,PST:.07,PVRT:1.5};function B(e,t,a){if(t.subscriptionMinuteRate&&a){const a=parseFloat(t.subscriptionMinuteRate)*(e.minutes+60*e.hours+24*e.days*60);return{days:0,hours:0,minutes:a,tripCost:a}}const l=W(e,t,a),s=G(e,l,t),o=z(e,s,t);return{days:o.dayCost,hours:s.hourCost,minutes:l.minuteCost,tripCost:o.dayCost+s.hourCost+l.minuteCost}}function W(e,t){const a=Math.ceil(t.hourRate/t.minuteRate),l=parseFloat(t.minuteRate)*e.minutes,s=parseFloat(t.hourRate)*e.hours;return e.minutes>=a||t.dayRate&&l+s>=t.dayRate?{minuteCost:0,billableMinutes:0,overflow:1}:{minuteCost:l,billableMinutes:e.minutes,overflow:0}}function G(e,t,a){const l=e.hours+t.overflow,s=parseFloat(a.hourRate)*l;if(!a.dayRate)return{hourCost:s+24*e.days*a.hourRate,billableHours:l+24*e.days,overflow:0};const o=Math.ceil(a.dayRate/a.hourRate);return l>=o||t.minuteCost+s>=a.dayRate?{hourCost:0,billableHours:0,overflow:1}:{hourCost:s,billableHours:l,overflow:0}}function z(e,t,a){if(!a.dayRate)return{dayCost:0,billableDays:0,overflow:0};const l=t.overflow?e.days+1:e.days;return{dayCost:parseFloat(a.dayRate)*l,billableDays:0,overflow:0}}function U(e,t){return t.isPvrtCharged?e*parseFloat(E.PVRT):0}function V(e,t){return{bcaa:e?.1*t:0}}function Z(e,t,a,l){const s={tripGst:l.isGstCharged?e*parseFloat(E.GST):0,tripPst:l.isPstCharged?e*parseFloat(E.PST):0,accessFeeGst:a*parseFloat(E.GST),accessFeePst:a*parseFloat(E.PST)};return l.isPvrtCharged?{...s,pvrtGst:t*parseFloat(E.GST)}:s}const K=e=>((0,s.dD)("data-v-3d583bde"),e=e(),(0,s.Cn)(),e),N={class:"adjustmentCalculator__container"},Y=K((()=>(0,s._)("div",{class:"adjustmentCalculator__heading"},"Trip adjustment",-1))),q=["checked"],J=["checked"],L={class:"adjustmentCalculator__duration"};var Q={__name:"AdjustmentCalculator",props:{startDatetime:{type:Date},originalCost:{type:Number},hasSubscription:{type:Boolean},selectedService:h},setup(e){const t=e,a=(0,o.iH)(new Date),l=(0,o.iH)(!1),r=(0,o.iH)(!0);function u(){l.value=!l.value}function i(){r.value=!r.value}function d(e){a.value=e}const v=(0,s.Fl)((()=>(0,O.calculateTripDuration)(t.startDatetime,a.value))),p=(0,s.Fl)((()=>{const e=B(v.value,t.selectedService,t.hasSubscription),a=r.value?parseFloat(t.selectedService.accessFee):0,s=U((0,O.calculatePvrtDays)(v.value),t.selectedService),o=Object.values(V(l.value,e.tripCost)).reduce(((e,t)=>e+t)),n=Object.values(Z(e.tripCost-o,s,a,t.selectedService)).reduce(((e,t)=>e+t));return e.tripCost-o+a+s+n})),_=(0,s.Fl)((()=>{if(Object.values(v.value).some((e=>e<0||isNaN(e))))return"Invalid time range";const e=1==v.value.days?"day":"days",t=1==v.value.hours?"hour":"hours",a=1==v.value.minutes?"minute":"minutes";return`${v.value.days} ${e} ${v.value.hours} ${t} ${v.value.minutes} ${a}`})),b=(0,s.Fl)((()=>{const e=p.value-t.originalCost;return e>=0?`$${e.toFixed(2)}`:`-$${Math.abs(e).toFixed(2)}`})),h=(0,s.Fl)((()=>[{label:"Original total cost",value:`$${t.originalCost.toFixed(2)}`},{label:"Adjusted total cost",value:`$${p.value.toFixed(2)}`},{label:"Adjustment amount",value:b.value,isTotal:!0}]));return(e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",N,[Y,(0,s.Wm)(m,{label:"Adjusted end time"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{datetime:a.value,"on-change":d},null,8,["datetime"])])),_:1}),(0,s.Wm)(m,{label:"BCAA member discount"},{default:(0,s.w5)((()=>[(0,s._)("input",{class:"adjustmentsCalculator__checkbox",id:"is-bcaa-member",type:"checkbox",checked:l.value,onChange:u},null,40,q)])),_:1}),(0,s.Wm)(m,{label:"Include access fee"},{default:(0,s.w5)((()=>[(0,s._)("input",{class:"adjustmentsCalculator__checkbox",id:"include-access-fee",type:"checkbox",checked:r.value,onChange:i},null,40,J)])),_:1})]),(0,s._)("div",L," Adjusted trip duration: "+(0,n.zw)((0,o.SU)(_)),1),(0,s.Wm)(M,{"cost-items":(0,o.SU)(h)},null,8,["cost-items"])],64))}};const X=(0,v.Z)(Q,[["__scopeId","data-v-3d583bde"]]);var ee=X;const te=e=>((0,s.dD)("data-v-b81f0eda"),e=e(),(0,s.Cn)(),e),ae={class:"costCalculator__container"},le=te((()=>(0,s._)("div",{class:"costCalculator__heading"},"Cost summary",-1))),se={class:"costCalculator__inputs"},oe=te((()=>(0,s._)("hr",{class:"costCalculator__divider"},null,-1))),ne={class:"costCalculator__duration"},re=te((()=>(0,s._)("hr",{class:"costCalculator__divider"},null,-1)));var ue={__name:"CostCalculator",props:{selectedService:h},setup(e){const t=e,a=(0,o.iH)(new Date),l=(0,o.iH)(new Date),r=(0,o.iH)(!1),u=(0,o.iH)(!0),c=(0,o.iH)(!1);function i(){r.value||(c.value=!1),r.value=!r.value}function d(){u.value=!u.value}function v(){c.value||(r.value=!1),c.value=!c.value}function p(e,t){a.value=e,l.value=t}const m=(0,s.Fl)((()=>(0,O.calculateTripDuration)(a.value,l.value))),_=(0,s.Fl)((()=>B(m.value,t.selectedService,c.value))),b=(0,s.Fl)((()=>V(r.value,_.value.tripCost))),h=(0,s.Fl)((()=>u.value?parseFloat(t.selectedService.accessFee):0)),f=(0,s.Fl)((()=>(0,O.calculatePvrtDays)(m.value))),g=(0,s.Fl)((()=>U(f.value,t.selectedService))),S=(0,s.Fl)((()=>{const e=_.value.tripCost-y.value;return Z(e,g.value,h.value,t.selectedService)})),y=(0,s.Fl)((()=>Object.values(b.value).reduce(((e,t)=>e+t)))),C=(0,s.Fl)((()=>Object.values(S.value).reduce(((e,t)=>e+t)))),F=(0,s.Fl)((()=>_.value.tripCost-y.value+h.value+g.value+C.value)),$=(0,s.Fl)((()=>{if(Object.values(m.value).some((e=>e<0||isNaN(e))))return"Invalid time range";const e=1==m.value.days?"day":"days",t=1==m.value.hours?"hour":"hours",a=1==m.value.minutes?"minute":"minutes";return`${m.value.days} ${e} ${m.value.hours} ${t} ${m.value.minutes} ${a}`})),D=(0,s.Fl)((()=>[{label:"Day rate",value:`$${_.value.days.toFixed(2)}`},{label:"Hour rate",value:`$${_.value.hours.toFixed(2)}`},{label:"Minute rate",value:`$${_.value.minutes.toFixed(2)}`}])),R=(0,s.Fl)((()=>{const e={bcaa:"BCAA"};return Object.keys(b.value).map((t=>({label:e[t],value:`$${b.value[t].toFixed(2)}`})))})),k=(0,s.Fl)((()=>[{label:"PVRT days",value:`${f.value}`},{label:"PVRT rate",value:`$${E.PVRT}`}])),I=(0,s.Fl)((()=>{const e={tripGst:"GST on trip",tripPst:"PST on trip",pvrtGst:"GST on PVRT",accessFeeGst:"GST on access fee",accessFeePst:"PST on access fee"};return Object.keys(S.value).map((t=>({label:e[t],value:`$${S.value[t].toFixed(2)}`})))})),T=(0,s.Fl)((()=>{const e=[{label:"Trip cost",value:`$${_.value.tripCost.toFixed(2)}`,tooltip:D.value},{label:"Discounts",value:`-$${y.value.toFixed(2)}`,tooltip:R.value},{label:"Access fee",value:`$${h.value.toFixed(2)}`}];return t.selectedService.isPvrtCharged&&e.push({label:"PVRT",value:`$${g.value.toFixed(2)}`,tooltip:k.value}),[...e,{label:"Tax",value:`$${C.value.toFixed(2)}`,tooltip:I.value},{label:"Total cost",value:`$${F.value.toFixed(2)}`,isTotal:!0}]}));return(t,m)=>((0,s.wg)(),(0,s.iD)("div",ae,[le,(0,s._)("div",se,[(0,s.Wm)(w,{"start-datetime":a.value,"end-datetime":l.value,"on-change":p,"is-bcaa-member":r.value,"include-access-fee":u.value,"has-subscription":c.value,"toggle-bcaa-member":i,"toggle-access-fee":d,"toggle-subscription":v,"selected-service":e.selectedService},null,8,["start-datetime","end-datetime","is-bcaa-member","include-access-fee","has-subscription","selected-service"])]),oe,(0,s._)("div",ne," Trip duration: "+(0,n.zw)((0,o.SU)($)),1),(0,s.Wm)(M,{"cost-items":(0,o.SU)(T)},null,8,["cost-items"]),re,(0,s.Wm)(ee,{"start-datetime":a.value,"original-cost":(0,o.SU)(F),"selected-service":e.selectedService,"has-subscription":c.value},null,8,["start-datetime","original-cost","selected-service","has-subscription"])]))}};const ce=(0,v.Z)(ue,[["__scopeId","data-v-b81f0eda"]]);var ie=ce;const de=e=>((0,s.dD)("data-v-2914c6d5"),e=e(),(0,s.Cn)(),e),ve={class:"serviceSelector__container"},pe=["checked"],me=de((()=>(0,s._)("label",{for:"serviceSelector__carShare"},"Car Share",-1))),_e=["checked"],be=de((()=>(0,s._)("label",{for:"serviceSelector__ebikeShare"},"E-Bike Share",-1)));var he={__name:"ServiceSelector",props:{selectedService:h,selectService:Function},setup(e){return(t,a)=>((0,s.wg)(),(0,s.iD)("form",ve,[(0,s._)("div",{class:"serviceSelector__option",onClick:a[0]||(a[0]=t=>e.selectService((0,o.SU)(h).CAR_SHARE))},[(0,s._)("input",{type:"radio",id:"serviceSelector__carShare",checked:"CAR_SHARE"==e.selectedService.name},null,8,pe),me]),(0,s._)("div",{id:"serviceSelector__option",onClick:a[1]||(a[1]=t=>e.selectService((0,o.SU)(h).EBIKE_SHARE))},[(0,s._)("input",{type:"radio",id:"serviceSelector__ebikeShare",checked:"EBIKE_SHARE"==e.selectedService.name},null,8,_e),be])]))}};const fe=(0,v.Z)(he,[["__scopeId","data-v-2914c6d5"]]);var ge=fe,Se={__name:"App",setup(e){const t=(0,o.iH)(h.CAR_SHARE);function a(e){t.value=e}return(e,l)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(ge,{"selected-service":t.value,"select-service":a},null,8,["selected-service"]),(0,s.Wm)(ie,{"selected-service":t.value},null,8,["selected-service"])],64))}};const ye=Se;var Ce=ye;(0,l.ri)(Ce).mount("#app")}},t={};function a(l){var s=t[l];if(void 0!==s)return s.exports;var o=t[l]={exports:{}};return e[l](o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,l,s,o){if(!l){var n=1/0;for(i=0;i<e.length;i++){l=e[i][0],s=e[i][1],o=e[i][2];for(var r=!0,u=0;u<l.length;u++)(!1&o||n>=o)&&Object.keys(a.O).every((function(e){return a.O[e](l[u])}))?l.splice(u--,1):(r=!1,o<n&&(n=o));if(r){e.splice(i--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var i=e.length;i>0&&e[i-1][2]>o;i--)e[i]=e[i-1];e[i]=[l,s,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var s,o,n=l[0],r=l[1],u=l[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(u)var i=u(a)}for(t&&t(l);c<n.length;c++)o=n[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(i)},l=self["webpackChunktrip_calculator"]=self["webpackChunktrip_calculator"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[998],(function(){return a(2768)}));l=a.O(l)})();
//# sourceMappingURL=app.1dfb32b5.js.map